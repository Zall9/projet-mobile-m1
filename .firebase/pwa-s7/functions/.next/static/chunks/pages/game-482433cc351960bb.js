(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{8484:function(n,e,t){var r={"./Mage.ts":9384,"./Thief.ts":1389,"./Unknown.ts":5719,"./Warrior.ts":6035};function i(n){var e=o(n);return t(e)}function o(n){if(!t.o(r,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return r[n]}i.keys=function(){return Object.keys(r)},i.resolve=o,n.exports=i,i.id=8484},5123:function(n,e,t){var r={"./ForestTent.ts":5436,"./StartingEventMage.ts":7304,"./StartingEventThief.ts":2029,"./StartingEventWarrior.ts":3940,"./Unknown.ts":2925};function i(n){var e=o(n);return t(e)}function o(n){if(!t.o(r,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return r[n]}i.keys=function(){return Object.keys(r)},i.resolve=o,n.exports=i,i.id=5123},134:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return t(6195)}])},9384:function(n,e,t){"use strict";t.r(e),t.d(e,{classInfos:function(){return r}});var r={nom:"Mage",description:"Le mage est un personnage qui utilise la magie pour attaquer ses ennemis.",image:"mage"}},1389:function(n,e,t){"use strict";t.r(e),t.d(e,{classInfos:function(){return r}});var r={nom:"Thief",description:"Le voleur est un personnage qui utilise la ruse pour attaquer ses ennemis.",image:"thief"}},5719:function(n,e,t){"use strict";t.r(e),t.d(e,{classInfos:function(){return r}});var r={nom:"Unknown",description:"Unknown",image:"unknown"}},6035:function(n,e,t){"use strict";t.r(e),t.d(e,{classInfos:function(){return r}});var r={nom:"Warrior",description:"Le guerrier est un personnage qui utilise la force pour attaquer ses ennemis.",image:"warrior"}},5436:function(n,e,t){"use strict";t.r(e),t.d(e,{eventInfos:function(){return i}});var r=t(821),i={nom:"Aire de repos d'Yggdrisal",description:"Vous vous reposez dans l'aire de repos d'Yggdrisal.",image:"tent_forest",sorties:[{direction:r.Nm.up,nextEvent:"StartingEventMage",willMinigame:!0,whichMinigame:"Memory"},{direction:r.Nm.down,nextEvent:"StartingEventMage",willMinigame:!0,whichMinigame:"Panier"},{direction:r.Nm.left,nextEvent:"StartingEventMage",willMinigame:!0,whichMinigame:"RPS"},{direction:r.Nm.right,nextEvent:"StartingEventMage",willMinigame:!0}]}},7304:function(n,e,t){"use strict";t.r(e),t.d(e,{eventInfos:function(){return i}});var r=t(821),i={nom:"Acad\xe9mie des mages",description:"Vous avez \xe9t\xe9 accept\xe9 \xe0 l'acad\xe9mie des mages.",image:"mage_00",sorties:[{direction:r.Nm.up,nextEvent:"ForestTent",willMinigame:!1},{direction:r.Nm.down,nextEvent:"StartingEventMage",willMinigame:!1},{direction:r.Nm.left,nextEvent:"StartingEventMage",willMinigame:!1},{direction:r.Nm.right,nextEvent:"StartingEventMage",willMinigame:!1}],classe:"Mage"}},2029:function(n,e,t){"use strict";t.r(e),t.d(e,{eventInfos:function(){return r}});var r={nom:"",description:"",image:"unknown",sorties:[],classe:"Voleur"}},3940:function(n,e,t){"use strict";t.r(e),t.d(e,{eventInfos:function(){return r}});var r={nom:"",description:"",image:"unknown",sorties:[],classe:"Guerrier"}},2925:function(n,e,t){"use strict";t.r(e),t.d(e,{eventInfos:function(){return r}});var r={sorties:[],nom:"Unknown",description:"Unknown",image:"unknown"}},821:function(n,e,t){"use strict";t.d(e,{Nm:function(){return r},Of:function(){return i}});var r;!function(n){n[n.up=0]="up",n[n.down=1]="down",n[n.left=2]="left",n[n.right=3]="right"}(r||(r={}));var i={nextEvent:"",willMinigame:!1,direction:r.up}},1538:function(n,e,t){"use strict";t.d(e,{s:function(){return u}});var r=t(7568),i=t(1438),o=t(6042),s=t(9396),a=t(655),c=t(5276),u=function(){function n(){(0,i.Z)(this,n),this.db=(0,c.N8)()}var e=n.prototype;return e.init=function(){var n=this;return(0,r.Z)((function(){var e,t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return e=(0,c.iH)(n.db),[4,(0,c.U2)((0,c.iU)(e,"/users/"))];case 1:return(t=r.sent()).exists()&&(n.datas=[],Object.keys(t.val()).forEach((function(e){return n.datas.push((0,s.Z)((0,o.Z)({},t.val()[e]),{username:e}))})),n.datas.sort((function(n,e){return e.score-n.score}))),[2]}}))}))()},e.getLeaderboard=function(e){var t=this.getMaxPage()<e||e<1?1:e;return this.datas.slice((t-1)*n.NB_PPL_PER_LINE,t*n.NB_PPL_PER_LINE)},e.getMaxPage=function(){return Math.floor(this.datas.length/n.NB_PPL_PER_LINE-1)+1},e.getUser=function(n){return this.datas.find((function(e){return e.username==n}))},n.updateUser=function(n){var e=(0,c.N8)();(0,c.t8)((0,c.iH)(e,"users/"+n.username),{score:n.score,classId:n.classId}).then((function(){return null}))},n}();u.NB_PPL_PER_LINE=5},6195:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSG:function(){return S},default:function(){return N}});var r=t(5893),i=t(7294),o=t(4902),s=t(9614),a=t(1438),c=function n(){(0,a.Z)(this,n)};c.IMAGE_PATH="/static/images/",c.IMAGE_EXT=".png",c.UNKNOWN_PATH="/static/images/unknown.png",c.MINIGAME_PATH=c.IMAGE_PATH+"minigames/";var u=function(){function n(){(0,a.Z)(this,n)}return n.getById=function(n){return t(8484)("./".concat(n,".ts")).classInfos},n.getClassesByIds=function(n){var e=this;return n.map((function(n){return e.getById(n)}))},n.getImage=function(n){return"unknown"===n.image?c.UNKNOWN_PATH:"".concat(c.IMAGE_PATH,"class/").concat(n.image).concat(c.IMAGE_EXT)},n}();function l(n){var e=n.classe,t=n.handleChoice;return(0,r.jsx)(o.xu,{sx:{borderColor:"black",borderWidth:"1px",height:"50vh",backgroundImage:"url(".concat(u.getImage(e),")"),backgroundSize:"cover",backgroundPosition:"center"},as:"button",onClick:function(){t(e)},children:(0,r.jsx)(o.xv,{color:s.O.fonts.white,fontSize:s.A.fontSize.h1,children:e.nom})})}var d=t(3569),f=t(1538);function g(n){var e=n.description,t=n.RootSetPlayerClass,i=null!==e?"teal":"red",a=n.selectedClass;return(0,r.jsxs)(o.xu,{sx:{borderColor:"black",boxShadow:"0 0 10px 0 rgba(0,0,0,0.5)",width:"75vw",marginLeft:"12.5vw",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(o.xv,{color:s.O.fonts.black,fontSize:s.A.fontSize.h5,children:e}),(0,r.jsx)(d.zx,{colorScheme:i,onClick:function(){var n=new f.s;n.init().then((function(){var e=n.getUser(localStorage.getItem("username"));e?e.classId=a.nom:e={username:localStorage.getItem("username"),score:0,classId:a.nom},f.s.updateUser(e),t(a)}))},children:"Valider le choix"})]})}function m(n){var e=function(n){m(n.description),c(n)},t=n.RootSetPlayerClass,s=(0,i.useState)(u.getById("Unknown")),a=s[0],c=s[1],d=(0,i.useState)(""),f=d[0],m=d[1];return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.MI,{columns:3,spacing:"5px",h:"100%",children:[u.getClassesByIds(["Mage","Thief","Warrior"]).map((function(n){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l,{classe:n,handleChoice:e})})})),(0,r.jsx)(g,{description:f,selectedClass:a,RootSetPlayerClass:t})]})})}var v,x=t(4924),h=t(6042),p=t(3382);var E=function(){function n(){(0,a.Z)(this,n)}return n.init=function(n){v=n.slice()},n.getById=function(n){return(v.includes(n)?t(5123)("./".concat(n,".ts")):t(2925)).eventInfos},n.getEventsByIds=function(n){var e=this;return n.map((function(n){return e.getById(n)}))},n.getImage=function(n){return console.log("".concat(c.IMAGE_PATH,"event/").concat(n.image).concat(c.IMAGE_EXT)),"unknown"===n.image?c.UNKNOWN_PATH:"".concat(c.IMAGE_PATH,"events/").concat(n.image).concat(c.IMAGE_EXT)},n.pickRandomEvent=function(){return this.pickRandomEventInIdList(v.filter((function(n){return"Unknown"!==n})))},n.pickRandomEventInIdList=function(n){return this.getById(n[Math.floor(Math.random()*n.length)])},n.getByClassRequirement=function(e){var t=void 0;return v.forEach((function(r){var i=n.getById(r);t||i.classe!==e||(t=i)})),null!==t&&void 0!==t?t:this.pickRandomEvent()},n}(),I=t(821),w=t(1163);function b(n){switch(n){case I.Nm.up:return{top:"12%"};case I.Nm.down:return{bottom:"25%"};default:var e;return e={},(0,x.Z)(e,I.Nm[n],"20%"),(0,x.Z)(e,"bottom","50%"),e}}function k(n){var e=n.event,t=(0,i.useState)(I.Of),a=t[0],c=t[1],u=(0,w.useRouter)();(0,i.useEffect)((function(){var n;a!=I.Of&&(localStorage.setItem("miniGameId",null!==(n=a.whichMinigame)&&void 0!==n?n:"random"),localStorage.setItem("nextEvent",a.nextEvent),u.push("/minigame").then((function(){return null})))}),[a]);var l={up:(0,r.jsx)(p.Hf,{}),down:(0,r.jsx)(p.ve,{}),left:(0,r.jsx)(p.Y4,{}),right:(0,r.jsx)(p.LZ,{})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.xu,{w:s.A.eventCardSize,sx:{display:"flex",justifyContent:"center",borderColor:"black",borderWidth:"1px",height:"80vh",backgroundImage:"url(".concat(E.getImage(e),")"),backgroundSize:"cover",backgroundPosition:"center"},children:[e.sorties.map((function(e){return(0,r.jsx)(d.hU,{"aria-label":"",id:I.Nm[e.direction],color:"white",sx:(0,h.Z)({position:"absolute",backgroundColor:"rgba(0, 0, 0, 0)"},b(e.direction)),icon:l[I.Nm[e.direction]],onClick:function(){return function(n,e,t,r){t.willMinigame?r(t):e(E.getById(t.nextEvent))}(0,n.setEvent,e,c)}})})),(0,r.jsx)(o.xv,{position:"absolute",bottom:"20%",color:s.O.fonts.white,fontSize:s.A.fontSize.h1,children:e.nom})]})})}var _=function(n){var e=[{id:1},{id:2},{id:3},{id:4}];return console.log("inventory",e),(0,r.jsx)(o.xu,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},children:e.map((function(n,e){return(0,r.jsx)(o.xu,{children:(0,r.jsx)(o.xu,{width:"54px",bg:"tomato",h:"54px",sx:{float:"left",margin:"2px",borderColor:"black",borderWidth:"1px"}})},n.id+e)}))})};function M(n){var e=n.event,t=n.setEvent;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.xu,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",height:"90vh",width:"100%"},children:(0,r.jsx)(o.MI,{columns:4,sx:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:(0,r.jsx)(k,{event:e,setEvent:t})})}),(0,r.jsx)(_,{})]})}var S=!0;function N(n){var e=n.prepareEventLists;E.init(e);var t=(0,i.useState)(!1),o=t[0],s=t[1],a=u.getById("Unknown"),c=(0,i.useState)(u.getById("Unknown")),l=c[0],d=c[1],g=(0,i.useState)(E.getById("Unknown")),v=g[0],x=g[1],h=(0,i.useRef)(0);return(0,i.useEffect)((function(){var n=new f.s;n.init().then((function(){var e=n.getUser(localStorage.getItem("username"));e&&(d(u.getById(e.classId)),x(localStorage.getItem("nextEvent")?E.getById(localStorage.getItem("nextEvent")):E.pickRandomEvent()),localStorage.removeItem("miniGameId"),localStorage.removeItem("nextEvent")),s(!0)}))}),[]),(0,i.useEffect)((function(){l&&h.current?x(E.pickRandomEvent()):x(E.getByClassRequirement(l.nom)),s(!0)}),[l]),(0,r.jsx)(r.Fragment,{children:o?l==a?(0,r.jsx)(m,{RootSetPlayerClass:d}):(0,r.jsx)(M,{setEvent:x,event:v}):(0,r.jsx)(r.Fragment,{})})}},9614:function(n,e,t){"use strict";t.d(e,{A:function(){return r},O:function(){return i}});var r={fontSize:{h1:{base:"24px",md:"40px",lg:"56px"},h2:{base:"20px",md:"32px",lg:"48px"},h3:{base:"18px",md:"28px",lg:"40px"},h4:{base:"16px",md:"24px",lg:"32px"},h5:{base:"14px",md:"20px",lg:"24px"},h6:{base:"12px",md:"16px",lg:"20px"}},eventCardSize:{base:"275px",sm:"350px",md:"550px",lg:"750px",xl:"850px","2xl":"1800px"},playButtonBoxSize:{base:124,sm:150,md:200,lg:250,xl:300,"2xl":400},playButtonTextPosition:{}},i={fonts:{primary:"#ffffff",black:"#0b0b0b",white:"#fbfbfb",gray:"#d1d1d1"}}}},function(n){n.O(0,[495,593,774,888,179],(function(){return e=134,n(n.s=e);var e}));var e=n.O();_N_E=e}]);